<!--
    This file is not used for now. This is just a note to myself on how to play
    songs that are served from a remote server using JavaScript.
-->

<!DOCTYPE html>
<html>
<body>
    <section 
        onclick="fetchAndPlay('http://localhost:8000/song/1')"
        style="cursor: pointer;"
    >
        Another One Bites The Dust
    </section>

    <button id="ctrl">Switch</button>

    <script>
    var currentSong;

    async function fetchAndPlay(url) {
        currentSong = new Audio(url);  
        currentSong.type = 'audio/mp3';

        try {
            await currentSong.play();
            console.log('Playing...');
        } catch (err) {
            console.log('Failed to play' + error);
        }
    }

    document.addEventListener('click', (e) => {
        if (!e.target.matches('#ctrl') || !currentSong) return;

        if (currentSong.paused && !currentSong.ended) {
            currentSong.play();
            console.log('Resuming...')
        } else if (!currentSong.paused && !currentSong.ended) {
            currentSong.pause();
            console.log('Paused')
        } else {
            console.log('Switch Error');
        }
    });
    </script>
</body>

</html>
