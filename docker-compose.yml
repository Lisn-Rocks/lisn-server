version: "3"
services:
    db:
      container_name: lisn_database
      image: postgres:13-alpine
      env_file:
        - .env
      ports:
        - 5432:5432
      volumes:
        - ./sql/00001-init-tables.sql:/docker-entrypoint-initdb.d/init.sql
    server:
        container_name: lisn_server
        build: .
        env_file:
          - .env
        environment:
          - POSTGRES_HOST=lisn_database
        ports:
          - 8080:8080
        depends_on: 
          - db
